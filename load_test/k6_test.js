import http from 'k6/http';
import { check } from 'k6';

const cert = `-----BEGIN CERTIFICATE-----
MIIFvzCCA6egAwIBAgIUZk99Fnp5r//rATEzBoeTJwtiEdIwDQYJKoZIhvcNAQEL
BQAwbzELMAkGA1UEBhMCSUQxDDAKBgNVBAgMA0xPTDELMAkGA1UEBwwCTE8xCzAJ
BgNVBAoMAkxMMQowCAYDVQQLDAFMMRIwEAYDVQQDDAlsb2NhbGhvc3QxGDAWBgkq
hkiG9w0BCQEWCW1tbUBhLmNvbTAeFw0yMzEwMDkxMzA0NThaFw0yODEwMDcxMzA0
NThaMG8xCzAJBgNVBAYTAklEMQwwCgYDVQQIDANMT0wxCzAJBgNVBAcMAkxPMQsw
CQYDVQQKDAJMTDEKMAgGA1UECwwBTDESMBAGA1UEAwwJbG9jYWxob3N0MRgwFgYJ
KoZIhvcNAQkBFgltbW1AYS5jb20wggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIK
AoICAQCdz5XEet2EojS9T4FRPnFLCinjplTLkhOYakI5vTEvAtonyT4Vl5Uarvkl
DbKgsynF3wlXMddWDJKb7Iw/MxsWIZfm0ZtfP8GyguluoJ7VUAqkLCwk+GAtklIT
WlNR+bR62wKoIMt959NRpDRLmUH1P1Be6IdX4oH2CIpTBcJNeOK97wmg+1Ls2W+x
RF2fsNH4g0rFbkur5KjTwy4l4BWwAE8qNeSsjfclIG2EdKjXrU0eIxAWEtFHjL/J
C9R8ftsjSQRE7fxDdDFav8J4Txqw5J1YXSPwvjp9H7P5Of8b1AZgB1ie2RPhLrHd
3HKMWe9KgQgGptkTjddvJl74DEXEG3IIwinFv1af1wrw4zYYfHn8z/ydJ463hGq9
I3Nj/jDPb+DXJ3eqQoIFtwoZlBfqQhMWGaktcEij/sxfDlRr7NcancgFWFMG1k6f
F+Mo62Tf8o6Sn4wK2GVSeVByXN/p/QJHn/JFQ2KjdcqIykwK9RuzvTzA7RYhpfCu
11rskUuzTtHLeURj8TSoZH1fvdSss46fvVv3IyLLUIoUQnz62ZJeUd3LfeEjzz1L
/+zfLLLdVsCT+SKSeSj/6Ws3in2WP5zOczzxVHFFxGgYzCFDYJIXxSCJl7AoyfRa
WXhfDIiCAfMYAfV1zy5SDbttYoSstHkxJkdA8I+zZqitCpmRuwIDAQABo1MwUTAd
BgNVHQ4EFgQUuuCNspXuB21uZT89qpjYEN5Oh0QwHwYDVR0jBBgwFoAUuuCNspXu
B21uZT89qpjYEN5Oh0QwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOC
AgEAFtOM4I0qyRGOJPNZUQkOeMcskvHjHCel9bU54MamgsojCHyXrhJZRU4Q/TFM
FNOIX71Kmx/ac+jhU2hT/8KSGuFgv3/6GxlZRoqR9f9Zwg2vMJKbKUEw8EVn58ly
rEAWaPO6uK1rVknwjd+DoLDj1pnKsYNDBaLePpxfK8lMaiL1/n/nv9G/61SQVjtN
dtuxRBbzQN6KwfLLZt+aR/Ql/v2qLnEDLIYVxlxm0ZFblubB5cI6tlV4KGq/caPM
cMYN4k49xPBCnBC0/jhBr1TawEoAGIkoYGRUj89ILaE8WDX8jrif5C8YLGIPrg42
UeaBhMyHzpdtlgQduZltQKBi9moqkFVuyf0eUWY8Iaddr3kRmKQco7Owi/ZbqDz4
UmV1Tgl/nxeyk5jwsyeqU3TuwYbkclKn95ngTh67+M0V3glFwDKO6h1O8GfQEfN0
miuugvSnIMPSh0kIKTt0EQ+/l1VBhja1Z697Up7HmKtUdB5b1cf9RAU7LegIBRMK
V6XL5+Jl9OvQkdMx6njy6E9bQw4e2u2L0IXzoauKJgGdB5OdRlrO3qiPWITe/gDJ
t2kdoE5OwYbaPmgt7bs+mns3Suf8DVIQh7GMBc111HouzHApmOY2ei2+13TA/56F
oKptiA93rmis+0vx9R9pGn6d1LUEjKEJzgPcw4HUuNGp0Ng=
-----END CERTIFICATE-----`


const key = `-----BEGIN PRIVATE KEY-----
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
7+qjvZb7fQDqagxws/rFM+UxTR7WHQ==
-----END PRIVATE KEY-----`


export const options = {
    tlsAuth: [
      {
        cert: cert,
        key: key,
      },
    ],
    vus :10,
    duration:'10s',
    insecureSkipTLSVerify: true
  };

export default function () {
  const res = http.get('http://127.0.0.1:8081');
//   const res = http.get('https://127.0.0.1:8080');
  check(res, {
    'status is 200': (r) => r.status === 200,
    'protocol is HTTP/2': (r) => r.proto === 'HTTP/2.0',
  });
}
