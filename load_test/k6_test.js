import http from 'k6/http';
import { check } from 'k6';

const cert = `-----BEGIN CERTIFICATE-----
MIID6zCCAtOgAwIBAgIULIhyDOIHWZpm7AxgaaqwJmanX+QwDQYJKoZIhvcNAQEL
BQAwgYQxCzAJBgNVBAYTAklEMRAwDgYDVQQIDAdKYWthcnRhMRAwDgYDVQQHDAdK
YWthcnRhMSEwHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQxCzAJBgNV
BAMMAkNBMSEwHwYJKoZIhvcNAQkBFhJjYWh5YW51M0BnbWFpbC5jb20wHhcNMjMx
MDA5MDcwODAyWhcNMjQxMDA4MDcwODAyWjCBhDELMAkGA1UEBhMCSUQxEDAOBgNV
BAgMB0pha2FydGExEDAOBgNVBAcMB0pha2FydGExITAfBgNVBAoMGEludGVybmV0
IFdpZGdpdHMgUHR5IEx0ZDELMAkGA1UEAwwCQ0ExITAfBgkqhkiG9w0BCQEWEmNh
aHlhbnUzQGdtYWlsLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB
ALwr5GyqD4+xZbVckb8aa1e7zTCstNV2tDJYL4H+2Hmep5WDsEl2LEWxAE5wX3LB
iKmIRzrbIRO/HL8TMOzdF4Re3iyULjYXfM5zWnUQCiWWvyY8yihzkgBGp4cPw40u
Xx34r8HvjI+DSKdza0bZDiyAKtpgQRKFQaltJu9YCSh/YByoLTdTwBzV65YxINgg
HBsw7vJd9J+T/h9rS17yMCE/tq9BNe3ZXkpg5/USjmWP1VhZgeRlQv/PUl51b6wa
tiLQxMIRZlQ6aqplbM5vWNfeF+krlWEdppHuc9SApyCMicDJsEbmiLDAFVjBFEOH
md+fEyXGWGcWKK6Y1g0YA3kCAwEAAaNTMFEwHQYDVR0OBBYEFEh67B0mVzBXca65
HMueAImSejlcMB8GA1UdIwQYMBaAFEh67B0mVzBXca65HMueAImSejlcMA8GA1Ud
EwEB/wQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAKGnS7jTzYC0XnnIAbc7Abey
AFZLx/309o6d4NUkqHIAvBoQXqGLMlXcso/wKej8+/f0PSsAFzWtsehIZ7kPAIaK
QzVU+txS2dquTnWkWx/RZlnJkUx+ATUBcLmpLppoHRASSLI5ZBvWq19Wp8oBTGKh
Hun3hqqyrsef0MwnJdPVO8ggK5/wblhl9sYiZBGtDeq+cVSJMmEDfSskks54qXZ6
bN23xk38HS2V32ogYciUfEH36DokjNzJV/Z9ZE7pwy55OiaZRQ4SbfmZFv/Gl9Bw
vgXP59GO8Hl5DfihSJmlmSZewDixKbpJlXG7plhtyPQhqZdRs2rXTHjPvsum0v4=
-----END CERTIFICATE-----`


const key = `-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC8K+Rsqg+PsWW1
XJG/GmtXu80wrLTVdrQyWC+B/th5nqeVg7BJdixFsQBOcF9ywYipiEc62yETvxy/
EzDs3ReEXt4slC42F3zOc1p1EAollr8mPMooc5IARqeHD8ONLl8d+K/B74yPg0in
c2tG2Q4sgCraYEEShUGpbSbvWAkof2AcqC03U8Ac1euWMSDYIBwbMO7yXfSfk/4f
a0te8jAhP7avQTXt2V5KYOf1Eo5lj9VYWYHkZUL/z1JedW+sGrYi0MTCEWZUOmqq
ZWzOb1jX3hfpK5VhHaaR7nPUgKcgjInAybBG5oiwwBVYwRRDh5nfnxMlxlhnFiiu
mNYNGAN5AgMBAAECggEAJ96s8ZE+5tVRlZHdl75DTD2QhmWxkyEpoRkqR8L1nx9M
ptNWQNp3GvUb+YK51pjHGhSz8vaHFaYCs0GftjBKUVPAg3WKLQ/g8+VhHziczcYZ
DkMHGncSUlimGmnupzVSFgmhQ9g70hShCkncSxCmfitR6R9H6mKtvPZRr5jZp+in
JBiECrTqGLmwUY2D9+Me8ejc1ijBjHQDEREesXdSeoqI2YwUYSjuEckdcEHCc6dD
KWKRO4nlTqpIUynuM8EIqF1p1OqF6ROxEdhF1J121rv1NdC4LNvMeb/lAetEDgSb
2lpOmHdV+zotW1yaTQPBn3VgGQZgnk4RxUluD3d5GQKBgQD/R9Y9OtwbLq0Os+0L
/+lsZZl5+Usx89bte1C/1eLxxPnIKeocgdeopVgYekK8Az3QeWvIGL4K4Ec6v8zg
ZovpJnYlA15tMXvkiWopxxVeymlEADf13JNO6D/Rd/R6iIhDC6XiIQZkJccGy0eK
uNyll2HIhnGLD2SEx23YnKeF5wKBgQC8s6RTHJCg4Y2wBmc6nLgzga4Lpgu5LCuw
WWXzuVMDxhzxEEFrjJO8TiSW0c6OG8pHhdoGYEMY2HzKkXQjy+6o02NlVYjZunp+
NcCa4KYzWPRxD6sPUgbVXd4AF71vayGzwZl7bjgSzBXXxRP2SITaokxqxGDnEP+M
duiPLSg/nwKBgCKo3Duf/DZsle6DG1Ifws+G09mtsTntA2dm8MW7An8U4Vz9491O
+7rYCCf6oYjpX8EoWyvlwBe177XYSLbG9YQIRs4rsOxeZZXX2mQltY8TKEulQ/PL
qOxzuAZ2pOjmFKoVsMYM+dMrFeSkQOhixQJulUYmis/4nQsyEIXybwRNAoGANcbo
XLs2SHMfQvwALUb+g8dAR5eRnbsF1GMV2AiHrPqnwteEHVdZvv9yE/1E5WDsG8f8
o3aJiKohnkUnmRAEOt7LY9SlhI9NW2yMMFc3ZkjCmPoDIQGaavIuU05wsTER0L2q
tO9rUYgR7YT/tF9kZT59kqvWheNlQK2ehzcyUjcCgYEA2xQ/ca1L4RFfkXn2TO6F
USuhZvDqyyUFpcLrWM0/g3nzQnsyqZRMUHtdYuZrWDxihCKU4D53Z4vHcuERJTGL
PggeSuaAzPKAGQPZl7h9gYfOsu4hUyvPP1psC2eO7CB6oMedco5HZTleHRNTyauL
PzPANpgiLSHUmDYMhjkA7W8=
-----END PRIVATE KEY-----
`


export const options = {
    tlsAuth: [
      {
        cert: cert,
        key: key,
      },
    ],
    vus :10,
    duration:'10s'
  };

export default function () {
  const res = http.get('https://localhost:8080');
  check(res, {
    'status is 200': (r) => r.status === 200,
    'protocol is HTTP/2': (r) => r.proto === 'HTTP/2.0',
  });
}
